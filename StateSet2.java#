import greenfoot.*;
import java.util.Map;
import java.util.HashMap;
import java.io.File;

/**
 * Write a description of class CharacterGraphics here.
 * 
 * @author (your name) 
 * @version (a version number or a date)
 */
public class StateSet2  
{
    private static final String imageDirectory = "images";
    private static final String noImageFile = "noImage.png";    
    private static GreenfootImage noImage;
    
    private Map<String, ActivitySet> states;
    private String name;
    private String currentState;
    private String currentActivity;
    private String currentOrientation;
    
    /**
     * Constructor for objects of class CharacterGraphics
     */
    public EntityGraphics(String name)
    {
        this.name = name;   
        
        // Verzeichnis des zugehörigen Grafik-Objektes ermitteln
        String path = imageDirectory+"/"+name;
                
        // Variablen vorbereiten
        states = new HashMap<String, AnimationSet>();
        noImage = Tools.loadImage(imageDirectory+"/"+name+"/"+noImageFile);
                   
        // Ordner mit Zuständen laden
        File[] directories = Tools.getDirContent(path, "dir");
        
        // Ergebnisse durchgehen und für jeden Zustand neues AnimationSet anlegen
        for(File file: directories)
        {
            System.out.println("Zustand: "+file.getName()+" - "+file.getPath());
            states.put(file.getName(), new AnimationSet(file.getPath()));            
        }       
    }
    
    public GreenfootImage getImage()
    {
        AnimationSet state = states.get(currentState);
        if (state != null)
        {
            GreenfootImage image = state.getImage(currentActivity, currentOrientation);
            if (image != null)
            {
                return image;
            }
            else
            {
                return noImage;
            }
        }
        else
        {
            return noImage;
        }
    }
    
    public void setState(String state)
    {
        currentState = state;
    }
    
    public void setActivity(String activity)
    {
        currentActivity = activity;
    }
    
    public void setOrientation(String orientation)
    {
        currentOrientation = orientation;
    }
    
    public void next()
    {
        AnimationSet state = states.get(currentState);
        if (state != null)
        {
            state.next(currentActivity);
        }
    }
}